/* Open the input file */
if ( !fits_open_file(&infptr, argv[1], READONLY, &status) )
  {
    /* Create the output file */
    if ( !fits_create_file(&outfptr, argv[2], &status) )
      {
	/* Copy every HDU until we get an error */
	while( !fits_movabs_hdu(infptr, ii++, NULL, &status) )
	  fits_copy_hdu(infptr, outfptr, 0, &status);

	/* Reset status after normal error */
	if (status == END_OF_FILE) status = 0;

	fits_close_file(outfptr,  &status);
      }
    fits_close_file(infptr, &status);
  }
